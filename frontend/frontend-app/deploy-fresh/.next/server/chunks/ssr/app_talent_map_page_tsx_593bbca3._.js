module.exports=[33974,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19721),e=a.i(50944),f=a.i(36545),g=a.i(53250);let h="pk.eyJ1IjoiY3JlZXJsaW8iLCJhIjoiY21pY3IxZHljMXFwNTJzb2FydzR4b3F1YSJ9.Is8-GyfEdqwKKEo2cGO65g";async function i(a){try{let b=encodeURIComponent(a),c=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${b}.json?access_token=${h}&country=AU&limit=1`),d=await c.json();if(d.features&&d.features.length>0){let a=d.features[0],[b,c]=a.center,e=a.context||[],f=e.find(a=>a.id.includes("place"))?.text||"",g=e.find(a=>a.id.includes("region"))?.text||"",h=e.find(a=>a.id.includes("postcode"))?.text||"";return{address:a.place_name,city:f,state:g,postcode:h,coordinates:{latitude:c,longitude:b}}}return null}catch(a){return console.error("Geocoding error:",a),null}}async function j(a,b,c="driving"){try{let f=await fetch(`https://api.mapbox.com/directions/v5/mapbox/${"driving"===c?"driving-traffic":c}/${a.longitude},${a.latitude};${b.longitude},${b.latitude}?access_token=${h}&geometries=geojson&steps=true&overview=full`),g=await f.json();if(g.routes&&g.routes.length>0){var d,e;let b=g.routes[0],f=Math.round(b.duration/60),h=(b.distance/1e3).toFixed(1),i=b.legs[0].steps.map(a=>({instruction:a.maneuver.instruction,distance:a.distance/1e3,duration:Math.round(a.duration/60)})),j="driving"===c?(d=a,e=parseFloat(h),d.latitude>=-34.1&&d.latitude<=-33.5&&d.longitude>=150.5&&d.longitude<=151.5?e>30?12:e>15?8:4*(e>5):0):void 0;return{duration:f,distance:parseFloat(h),mode:c,tollCost:j,steps:i}}return null}catch(a){return console.error("Route calculation error:",a),null}}function k(a){return Math.PI/180*a}var l=a.i(30049),m=a.i(24987),n=a.i(70106);let o=(0,n.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),p=(0,n.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var q=a.i(77156);let r=(0,n.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function s({onLayerToggle:a,layers:d}){let[e,f]=(0,c.useState)(!0),g=b=>{d.forEach(c=>{c.visible!==b&&a(c.id,b)})};return(0,b.jsxs)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg overflow-hidden z-10 max-w-xs",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(m.MapPin,{className:"w-5 h-5"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Map Layers"})]}),(0,b.jsx)("button",{onClick:()=>f(!e),className:"text-white hover:bg-white/20 rounded p-1 transition-colors","aria-label":e?"Collapse legend":"Expand legend",children:e?(0,b.jsx)(p,{className:"w-5 h-5"}):(0,b.jsx)(o,{className:"w-5 h-5"})})]}),e&&(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsxs)("div",{className:"flex space-x-2 mb-3 pb-3 border-b border-gray-200",children:[(0,b.jsxs)("button",{onClick:()=>g(!0),className:"flex-1 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded transition-colors flex items-center justify-center space-x-1",children:[(0,b.jsx)(q.Eye,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Show All"})]}),(0,b.jsxs)("button",{onClick:()=>g(!1),className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-50 hover:bg-gray-100 rounded transition-colors flex items-center justify-center space-x-1",children:[(0,b.jsx)(r,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Hide All"})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:d.map(c=>(0,b.jsxs)("button",{onClick:()=>{var b;let e;return b=c.id,void((e=d.find(a=>a.id===b))&&a(b,!e.visible))},className:`w-full flex items-center justify-between p-2 rounded-lg transition-all ${c.visible?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200 opacity-60 hover:opacity-100"}`,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:c.color}}),(0,b.jsx)("div",{style:{color:c.color},children:c.icon}),(0,b.jsx)("span",{className:`text-sm font-medium ${c.visible?"text-gray-900":"text-gray-600"}`,children:c.label})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[void 0!==c.count&&c.count>0&&(0,b.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gray-100 text-gray-700",children:c.count}),(0,b.jsx)("div",{className:`w-10 h-5 rounded-full transition-colors ${c.visible?"bg-blue-600":"bg-gray-300"}`,children:(0,b.jsx)("div",{className:`w-4 h-4 mt-0.5 rounded-full bg-white shadow-sm transition-transform ${c.visible?"translate-x-5":"translate-x-0.5"}`})})]})]},c.id))}),(0,b.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,b.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Toggle layers to customize your map view"})})]})]})}let t=(0,n.default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),u=(0,n.default)("tram-front",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]),v=(0,n.default)("bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),w=(0,n.default)("footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);var x=a.i(90166),y=a.i(41710);let z=(0,n.default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var A=a.i(81010),B=a.i(67900);let C=[{id:"driving",label:"Drive",icon:t,color:"blue"},{id:"transit",label:"Transit",icon:u,color:"green"},{id:"cycling",label:"Cycle",icon:v,color:"purple"},{id:"walking",label:"Walk",icon:w,color:"orange"}],D=[{name:"Sydney CBD",state:"NSW",lat:-33.8688,lng:151.2093},{name:"Parramatta",state:"NSW",lat:-33.815,lng:151},{name:"Bondi",state:"NSW",lat:-33.8915,lng:151.2767},{name:"Chatswood",state:"NSW",lat:-33.7969,lng:151.1832},{name:"Melbourne CBD",state:"VIC",lat:-37.8136,lng:144.9631},{name:"Richmond",state:"VIC",lat:-37.8197,lng:144.9989},{name:"St Kilda",state:"VIC",lat:-37.8679,lng:144.9811},{name:"Brunswick",state:"VIC",lat:-37.7667,lng:144.96},{name:"Brisbane CBD",state:"QLD",lat:-27.4698,lng:153.0251},{name:"Fortitude Valley",state:"QLD",lat:-27.4572,lng:153.0355},{name:"South Bank",state:"QLD",lat:-27.4766,lng:153.0202},{name:"New Farm",state:"QLD",lat:-27.4667,lng:153.05},{name:"Perth CBD",state:"WA",lat:-31.9505,lng:115.8605},{name:"Fremantle",state:"WA",lat:-32.0569,lng:115.7439},{name:"Subiaco",state:"WA",lat:-31.9474,lng:115.8248},{name:"Adelaide CBD",state:"SA",lat:-34.9285,lng:138.6007},{name:"Glenelg",state:"SA",lat:-34.9804,lng:138.5129},{name:"Hobart CBD",state:"TAS",lat:-42.8821,lng:147.3272},{name:"Canberra City",state:"ACT",lat:-35.2809,lng:149.13},{name:"Darwin City",state:"NT",lat:-12.4634,lng:130.8456}];function E({origin:a,destination:d,onRouteCalculated:e,onOriginChange:f}){let[g,h]=(0,c.useState)("driving"),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!a);(0,c.useEffect)(()=>{a&&d&&!i&&t()},[a,d]);let t=async()=>{if(!a||!d)return void o("Please select your location and a business to calculate route");j(!0),o(null);try{let b=await fetch("https://opulent-capybara-97gqpjqr69939pqw-5007.app.github.dev/api/map/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({origin:{latitude:a.latitude,longitude:a.longitude},destination:{latitude:d.latitude,longitude:d.longitude},travelMode:g})});if(!b.ok)throw Error("Failed to calculate route");let c=await b.json();l(c),e(c)}catch(a){o(a instanceof Error?a.message:"Failed to calculate route")}finally{j(!1)}},u=a=>`$${a.toFixed(2)}`;return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(z,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Route Calculator"})]}),a&&(0,b.jsx)("button",{onClick:()=>s(!0),className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Change Location"})]}),r&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Your Location"}),a&&(0,b.jsx)("button",{onClick:()=>s(!1),className:"text-xs text-gray-600 hover:text-gray-700",children:"Cancel"})]}),(0,b.jsx)("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:D.map(a=>(0,b.jsx)("button",{onClick:()=>{let b;return b={latitude:a.lat,longitude:a.lng,address:`${a.name}, ${a.state}`},void(q(`${a.name}, ${a.state}`),s(!1),f&&f(b))},className:"w-full text-left px-3 py-2 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.state})]})},`${a.name}-${a.state}`))}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ Select the suburb where you live or want to live"})]}),!r&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Travel Mode"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:C.map(a=>{let c=a.icon,d=g===a.id;return(0,b.jsxs)("button",{onClick:()=>h(a.id),className:`flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all ${d?`border-${a.color}-500 bg-${a.color}-50`:"border-gray-200 hover:border-gray-300 bg-white"}`,children:[(0,b.jsx)(c,{className:`w-6 h-6 mb-1 ${d?`text-${a.color}-600`:"text-gray-600"}`}),(0,b.jsx)("span",{className:`text-xs font-medium ${d?`text-${a.color}-700`:"text-gray-700"}`,children:a.label})]},a.id)})})]}),!r&&(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-start space-x-2 bg-green-50 p-3 rounded-lg",children:[(0,b.jsx)(A.Home,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-green-700 font-medium mb-1",children:"Your Location (Point A)"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a?.address||(a?`${a.latitude.toFixed(4)}, ${a.longitude.toFixed(4)}`:"Not selected")}),!a&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"ðŸ‘† Select a suburb above"})]})]}),(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(z,{className:"w-4 h-4 text-blue-500"})}),(0,b.jsxs)("div",{className:"flex items-start space-x-2 bg-red-50 p-3 rounded-lg",children:[(0,b.jsx)(B.Building2,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-red-700 font-medium mb-1",children:"Business Location (Point B)"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:d?.name||d?.address||(d?`${d.latitude.toFixed(4)}, ${d.longitude.toFixed(4)}`:"Not selected")}),!d&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"ðŸ‘† Click a business marker on the map"})]})]})]}),!r&&(0,b.jsx)("button",{onClick:t,disabled:!a||!d||i,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,b.jsx)("span",{children:"Calculating..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"Calculate Route"})]})}),!r&&n&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-800",children:n})}),!r&&k&&(0,b.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900",children:"Trip Summary"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,b.jsx)(m.MapPin,{className:"w-4 h-4 text-blue-600"}),(0,b.jsx)("span",{className:"text-xs text-blue-700 font-medium",children:"Distance"})]}),(0,b.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:[k.distance.toFixed(1)," km"]})]}),(0,b.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,b.jsx)(y.Clock,{className:"w-4 h-4 text-purple-600"}),(0,b.jsx)("span",{className:"text-xs text-purple-700 font-medium",children:"Duration"})]}),(0,b.jsx)("p",{className:"text-xl font-bold text-purple-900",children:(a=>{if(a<60)return`${Math.round(a)} min`;let b=Math.floor(a/60),c=Math.round(a%60);return`${b}h ${c}m`})(k.duration)})]})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)(x.DollarSign,{className:"w-4 h-4 text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-green-700 font-semibold",children:"Cost Breakdown"})]}),(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[k.fuelCost>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Fuel"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:u(k.fuelCost)})]}),k.tollCost>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Tolls"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:u(k.tollCost)})]}),k.parkingCost>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Parking (daily)"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:u(k.parkingCost)})]}),k.publicTransportCost>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Public Transport"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:u(k.publicTransportCost)})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-2 border-t border-green-200",children:[(0,b.jsx)("span",{className:"font-semibold text-green-800",children:"Total Trip Cost"}),(0,b.jsx)("span",{className:"font-bold text-green-900 text-lg",children:u(k.totalCost)})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium mb-2",children:"Commute Estimates"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Daily (2x)"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:u(2*k.totalCost)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Weekly"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:u(2*k.totalCost*5)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Monthly"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:u(2*k.totalCost*20)})]})]})]})]})]})}let F=(0,n.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),G=(0,n.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),H=(0,n.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),I=(0,n.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),J=[1,2,5,10,20],K=["All","Primary","Secondary","High School","Private","Public"];function L({location:a,onSchoolsFound:d}){let[e,f]=(0,c.useState)(5),[g,h]=(0,c.useState)("All"),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)([]),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),r=async()=>{if(!a)return void o("Please set a location on the map");j(!0),o(null);try{let b=await fetch("https://opulent-capybara-97gqpjqr69939pqw-5007.app.github.dev/api/map/schools",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:{latitude:a.latitude,longitude:a.longitude},radiusKm:e,schoolType:"All"===g?null:g})});if(!b.ok)throw Error("Failed to search schools");let c=await b.json();l(c),d(c)}catch(a){o(a instanceof Error?a.message:"Failed to search schools")}finally{j(!1)}},s=a=>{if(a<60)return`${Math.round(a)} min`;let b=Math.floor(a/60),c=Math.round(a%60);return`${b}h ${c}m`};return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(F,{className:"w-5 h-5"}),(0,b.jsx)("h3",{className:"font-semibold",children:"School Finder"})]})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Radius"}),(0,b.jsx)("div",{className:"flex space-x-2",children:J.map(a=>(0,b.jsxs)("button",{onClick:()=>f(a),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border-2 transition-colors ${e===a?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[a," km"]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Type"}),(0,b.jsx)("select",{value:g,onChange:a=>h(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:K.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-2 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)(m.MapPin,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 text-sm",children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Search Location"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a?`${a.latitude.toFixed(4)}, ${a.longitude.toFixed(4)}`:"Not set"})]})]}),(0,b.jsx)("button",{onClick:r,disabled:!a||i,className:"w-full py-3 px-4 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,b.jsx)("span",{children:"Searching..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(I,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"Find Schools"})]})})]}),n&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-800",children:n})}),k.length>0&&(0,b.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Found ",k.length," Schools"]}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["within ",e,"km"]})]}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2 pr-2",children:k.map(a=>(0,b.jsxs)("div",{onClick:()=>q(p?.id===a.id?null:a),className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${p?.id===a.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300 bg-white"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h5",{className:"font-semibold text-gray-900 text-sm",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,b.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${a.isPublic?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:a.type}),a.fees&&(0,b.jsx)("span",{className:"text-xs text-gray-600",children:a.fees})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1 text-yellow-500",children:[(0,b.jsx)(G,{className:"w-4 h-4 fill-current"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:a.rating})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600 mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(m.MapPin,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:[a.distance.toFixed(1)," km"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(F,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:[a.studentCount," students"]})]})]}),p?.id===a.id&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Travel Times from Home"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,b.jsxs)("div",{className:"bg-blue-50 rounded p-2",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-1",children:"ðŸš— Drive"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:s(a.travelTimeDriving)})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded p-2",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-1",children:"ðŸšŒ Transit"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:s(a.travelTimePublicTransport)})]}),(0,b.jsxs)("div",{className:"bg-orange-50 rounded p-2",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-1",children:"ðŸš¶ Walk"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:s(a.travelTimeWalking)})]})]}),(0,b.jsx)("div",{className:"bg-yellow-50 rounded p-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-700",children:"Est. Daily Transport Cost"}),(0,b.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["$",(a.travelTimePublicTransport/60*4.5).toFixed(2)]})]})}),a.website&&(0,b.jsxs)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 w-full py-2 px-3 bg-green-600 text-white text-sm font-medium rounded hover:bg-green-700 transition-colors",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("span",{children:"Visit Website"}),(0,b.jsx)(H,{className:"w-3 h-3"})]})]})]},a.id))})]})]})]})}let M=(0,n.default)("bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),N=(0,n.default)("bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]]);var O=a.i(24669);let P=[{id:"rent",label:"Rent",icon:"ðŸ "},{id:"sale",label:"Buy",icon:"ðŸ’°"}],Q=[{value:null,label:"Any"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4+"}];function R({onPropertiesFound:a}){let[d,e]=(0,c.useState)("rent"),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)("NSW"),[j,k]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)({}),[s,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(null),x=async()=>{if(!f.trim())return void w("Please enter a suburb");n(!0),w(null);try{let b=await fetch("https://opulent-capybara-97gqpjqr69939pqw-5007.app.github.dev/api/map/properties",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suburb:f,state:h,propertyType:d,bedrooms:j})});if(!b.ok)throw Error("Failed to search properties");let c=await b.json();p(c.properties),r(c.medianPrices),u(c.agents),a(c.properties,c.medianPrices)}catch(a){w(a instanceof Error?a.message:"Failed to search properties")}finally{n(!1)}};return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(A.Home,{className:"w-5 h-5"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Property Search"})]})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:P.map(a=>(0,b.jsxs)("button",{onClick:()=>e(a.id),className:`py-2 px-4 text-sm font-medium rounded-lg border-2 transition-colors flex items-center justify-center space-x-2 ${d===a.id?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{children:a.label})]},a.id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Suburb"}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"e.g. Sydney, Melbourne...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,b.jsx)("select",{value:h,onChange:a=>i(a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:l.AUSTRALIAN_STATES.map(a=>(0,b.jsx)("option",{value:a.value,children:a.abbr},a.value))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms"}),(0,b.jsx)("div",{className:"flex space-x-2",children:Q.map(a=>(0,b.jsx)("button",{onClick:()=>k(a.value),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border-2 transition-colors ${j===a.value?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:a.label},a.label))})]}),(0,b.jsx)("button",{onClick:x,disabled:!f.trim()||m,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2",children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,b.jsx)("span",{children:"Searching..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Home,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"Search Properties"})]})})]}),v&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-red-800",children:v})}),Object.keys(q).length>0&&(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)(O.TrendingUp,{className:"w-4 h-4 text-blue-600"}),(0,b.jsxs)("h4",{className:"font-semibold text-blue-900 text-sm",children:["Median Prices in ",f]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(q).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a}),(0,b.jsxs)("p",{className:"font-bold text-gray-900",children:["$",c.toLocaleString(),"rent"===d?"/wk":""]})]},a))})]}),o.length>0&&(0,b.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Found ",o.length," Properties"]})}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-3 pr-2",children:o.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-gray-200 hover:border-orange-300 transition-all overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative h-40 bg-gray-200",children:[(0,b.jsx)("img",{src:a.image,alt:a.address,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800"}}),(0,b.jsx)("div",{className:"absolute top-2 right-2 bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:a.priceText})]}),(0,b.jsxs)("div",{className:"p-3 space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"font-semibold text-gray-900",children:a.address}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[a.suburb,", ",a.state]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(M,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:a.bedrooms})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(N,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:a.bathrooms})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(t,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:a.parking})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 line-clamp-2",children:a.description}),(0,b.jsxs)("a",{href:a.listingUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 w-full py-2 px-3 bg-orange-600 text-white text-sm font-medium rounded hover:bg-orange-700 transition-colors",children:[(0,b.jsx)("span",{children:"View Full Listing"}),(0,b.jsx)(H,{className:"w-3 h-3"})]})]})]},a.id))})]}),s.length>0&&(0,b.jsxs)("div",{className:"pt-3 border-t border-gray-200",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Local Real Estate Agents"}),(0,b.jsx)("div",{className:"space-y-2",children:s.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("h5",{className:"font-semibold text-gray-900",children:a.name}),(0,b.jsx)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700",children:(0,b.jsx)(H,{className:"w-4 h-4"})})]}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a.specialty}),(0,b.jsx)("p",{className:"text-xs text-gray-700 font-medium mt-1",children:a.phone})]},c))})]})]})]})}let S=(0,n.default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);function T({value:a,onChange:d,placeholder:e="Start typing suburb or city...",className:f=""}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!1),[k,n]=(0,c.useState)(!1),o=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let a=a=>{o.current&&!o.current.contains(a.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,b.jsxs)("div",{ref:o,className:"relative",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.MapPin,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>(a=>{if(d(a),a.length<2){h([]),n(!1);return}j(!0),h((0,l.searchCities)(a).slice(0,15)),n(!0),j(!1)})(a.target.value),onFocus:()=>a.length>=2&&n(!0),placeholder:e,className:`w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent ${f}`}),i&&(0,b.jsx)(S,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),k&&g.length>0&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl max-h-80 overflow-y-auto",children:g.map(a=>(0,b.jsx)("button",{onClick:()=>{d(`${a.name}, ${a.state}`,{...a,lat:a.lat,lng:a.lng}),h([]),n(!1)},className:"w-full px-4 py-3 text-left hover:bg-amber-50 border-b border-gray-100 last:border-b-0 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(m.MapPin,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[a.state," ",a.postcode," Â· ",a.region]})]})]})},a.id))}),k&&0===g.length&&a.length>=2&&!i&&(0,b.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl p-4 text-center text-gray-500 text-sm",children:['No locations found for "',a,'"']})]})}let U=(0,n.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),V=(0,n.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),W=(0,d.default)(async()=>{},{loadableGenerated:{modules:[75301]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading map..."})]})})}),X=["All",...l.INDUSTRIES],Y=[5,10,20,50];function Z(){let{user:a}=(0,f.useAuth)(),d=(0,e.useRouter)(),[h,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)("All"),[q,r]=(0,c.useState)(20),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(),[x,y]=(0,c.useState)([151.2093,-33.8688]),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),[D,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,M]=(0,c.useState)(!0),[N,O]=(0,c.useState)("route"),[P,Q]=(0,c.useState)([]),[S,Z]=(0,c.useState)([]),[$,_]=(0,c.useState)([{id:"platform-businesses",label:"Platform Businesses",icon:null,color:"#3b82f6",visible:!0,count:0},{id:"external-businesses",label:"External Businesses",icon:null,color:"#8b5cf6",visible:!1,count:0},{id:"schools",label:"Schools",icon:null,color:"#10b981",visible:!1,count:0},{id:"properties-rent",label:"Rental Properties",icon:null,color:"#f59e0b",visible:!1,count:0},{id:"properties-sale",label:"Properties for Sale",icon:null,color:"#ef4444",visible:!1,count:0},{id:"transport",label:"Public Transport",icon:null,color:"#6366f1",visible:!1,count:0},{id:"points-of-interest",label:"Points of Interest",icon:null,color:"#ec4899",visible:!1,count:0}]);(0,c.useEffect)(()=>{J(!0)},[]),(0,c.useEffect)(()=>{I&&(async()=>{H(!0);let a=(0,g.getApiBaseUrl)();console.log("ðŸ—ºï¸ Loading business markers from API...",{center:x,radius:q});let{data:b,error:c}=await (0,g.safeFetch)(`${a}/api/business/map/markers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:x[1],longitude:x[0],radiusKm:q,limit:100,hiringOnly:!1})});c?console.error("âŒ Failed to load businesses:",c):b&&(console.log("âœ… Loaded",b.length,"businesses"),l(b),n(b)),H(!1)})()},[I,x,q]);let[aa,ab]=(0,c.useState)({totalBusinesses:0,totalJobs:0,nearbySchools:0,averageCommute:0});(0,c.useEffect)(()=>{let a=localStorage.getItem("userHomeLocation");if(a)try{let b=JSON.parse(a);w([b.longitude,b.latitude]),y([b.longitude,b.latitude]),F({latitude:b.latitude,longitude:b.longitude,address:b.address||"Your Location"})}catch(a){console.error("Error loading home location:",a)}},[]),(0,c.useEffect)(()=>{let a=h;"All"!==o&&(a=a.filter(a=>a.industry===o)),v&&(a=a.filter(a=>{var b,c;let d,e,f;return b={latitude:v[1],longitude:v[0]},d=k((c={latitude:a.location.latitude,longitude:a.location.longitude}).latitude-b.latitude),e=k(c.longitude-b.longitude),Math.round(6371*(2*Math.atan2(Math.sqrt(f=Math.sin(d/2)*Math.sin(d/2)+Math.cos(k(b.latitude))*Math.cos(k(c.latitude))*Math.sin(e/2)*Math.sin(e/2)),Math.sqrt(1-f)))*10)/10<=q})),n(a),ab({totalBusinesses:a.length,totalJobs:a.reduce((a,b)=>a+b.openPositions,0),nearbySchools:0,averageCommute:0})},[h,o,q,v]);let ac=async()=>{if(t.trim()){H(!0);try{let a=await i(t);a&&a.coordinates&&(y([a.coordinates.longitude,a.coordinates.latitude]),w([a.coordinates.longitude,a.coordinates.latitude]),localStorage.setItem("userHomeLocation",JSON.stringify({address:a.address,longitude:a.coordinates.longitude,latitude:a.coordinates.latitude})))}catch(a){console.error("Error geocoding address:",a),alert("Could not find that location. Please try again.")}finally{H(!1)}}},ad=async a=>{if(C(a),v){H(!0);try{let b=await j({latitude:v[1],longitude:v[0]},{latitude:a.location.latitude,longitude:a.location.longitude},"driving");if(b){let a=b.steps?b.steps.flatMap(a=>a.geometry?.coordinates||[]):[];A({type:"Feature",geometry:{type:"LineString",coordinates:a}})}}catch(a){console.error("Error calculating route:",a)}finally{H(!1)}}},ae=m.map(a=>({id:a.id,name:a.name,industry:a.industry,address:a.address||`${a.location.city}, ${a.location.state}`,latitude:a.location.latitude,longitude:a.location.longitude,jobCount:a.openPositions,logo:a.logo,city:a.location.city,state:a.location.state,openPositions:a.openPositions,activelyHiring:a.activelyHiring}));return(0,b.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,b.jsx)("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸŒŸ Discover Your Next Workplace"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Explore businesses, research locations, and connect proactively"}),(0,b.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,b.jsx)("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-full font-medium",children:"Find Great Employers"}),(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full font-medium",children:"Research Locations"}),(0,b.jsx)("span",{className:"px-2 py-1 bg-green-50 text-green-700 text-xs rounded-full font-medium",children:"Proactive Recruiting"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>d.push("/talent/portfolio/preview"),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-purple-700 hover:to-blue-700 flex items-center gap-2",children:"ðŸ“¤ Share Portfolio"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Welcome,"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:a?.firstName||"Guest"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Location"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(T,{value:t,onChange:(a,b)=>{u(a),b&&(y([b.lng,b.lat]),w([b.lng,b.lat]),localStorage.setItem("userHomeLocation",JSON.stringify({address:a,longitude:b.lng,latitude:b.lat})))},placeholder:"Enter address or suburb...",className:"flex-1"}),(0,b.jsx)("button",{onClick:ac,disabled:G,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:G?"...":"Go"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),(0,b.jsx)("select",{value:o,onChange:a=>p(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:X.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km)"}),(0,b.jsx)("div",{className:"flex gap-2",children:Y.map(a=>(0,b.jsxs)("button",{onClick:()=>r(a),className:`flex-1 px-3 py-2 rounded-lg font-medium transition-colors ${q===a?"bg-amber-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a,"km"]},a))})]})]})]})}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 px-4 py-3",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,b.jsx)("strong",{className:"text-blue-700",children:aa.totalBusinesses})," ",(0,b.jsx)("span",{className:"text-amber-700",children:"businesses to explore"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,b.jsx)("strong",{className:"text-green-700",children:aa.totalJobs})," ",(0,b.jsx)("span",{className:"text-green-700",children:"opportunities"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"ðŸŽ¯ Make proactive connections"})})]}),B&&z&&(0,b.jsx)("button",{onClick:()=>{A(null),C(null)},className:"px-4 py-1.5 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:"Clear Route"})]})}),(0,b.jsxs)("div",{className:"flex-1 relative flex",children:[!v&&(0,b.jsx)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 shadow-lg max-w-md",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Set your home location"}),(0,b.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Search for your address above to see businesses within your preferred distance and calculate commute times."})]})]})}),(0,b.jsx)(W,{businesses:ae,center:x,zoom:v?12:11,onBusinessClick:a=>{let b=m.find(b=>b.id===a.id);b&&ad(b)},showUserLocation:!0,userHome:v,routeGeoJSON:z,schools:P,properties:S,visibleLayers:$.filter(a=>a.visible).map(a=>a.id)}),(0,b.jsx)(s,{layers:$.map(a=>({...a,count:"platform-businesses"===a.id?aa.totalBusinesses:"schools"===a.id?P.length:"properties-rent"===a.id||"properties-sale"===a.id?S.length:0})),onLayerToggle:(a,b)=>{_(c=>c.map(c=>c.id===a?{...c,visible:b}:c))}}),(0,b.jsx)("button",{onClick:()=>M(!K),className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white rounded-r-lg shadow-lg p-2 hover:bg-gray-50 transition-colors",style:{left:K?"400px":"4px"},children:K?(0,b.jsx)(U,{className:"w-5 h-5 text-gray-600"}):(0,b.jsx)(V,{className:"w-5 h-5 text-gray-600"})}),K&&(0,b.jsxs)("div",{className:"absolute left-0 top-0 bottom-0 w-96 bg-white shadow-xl z-10 overflow-y-auto",children:[(0,b.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("button",{onClick:()=>O("route"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors ${"route"===N?"border-b-2 border-blue-600 text-blue-700 bg-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸš— Routes"}),(0,b.jsx)("button",{onClick:()=>O("schools"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors ${"schools"===N?"border-b-2 border-green-600 text-green-700 bg-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸŽ“ Schools"}),(0,b.jsx)("button",{onClick:()=>O("properties"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors ${"properties"===N?"border-b-2 border-orange-600 text-orange-700 bg-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ  Properties"})]})}),(0,b.jsxs)("div",{className:"p-4",children:["route"===N&&(0,b.jsx)(E,{origin:D,destination:B?{latitude:B.location.latitude,longitude:B.location.longitude,name:B.name,address:B.address||`${B.location.city}, ${B.location.state}`}:null,onRouteCalculated:a=>{console.log("Route calculated:",a),a.geometry&&A(a.geometry)},onOriginChange:a=>{console.log("Origin changed:",a),F(a),a&&(y([a.longitude,a.latitude]),w([a.longitude,a.latitude]))}}),"schools"===N&&(0,b.jsx)(L,{location:v?{latitude:v[1],longitude:v[0]}:null,onSchoolsFound:a=>{Q(a),_(b=>b.map(b=>"schools"===b.id?{...b,visible:!0,count:a.length}:b))}}),"properties"===N&&(0,b.jsx)(R,{onPropertiesFound:(a,b)=>{Z(a),console.log("Properties found:",a.length),console.log("Median prices:",b)}})]})]})]})]})}a.s(["default",()=>Z],33974)}];

//# sourceMappingURL=app_talent_map_page_tsx_593bbca3._.js.map