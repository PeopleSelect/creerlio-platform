(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18948,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(70703),l=e.i(18566),r=e.i(83642),i=e.i(54858);e.i(47167);let n="pk.eyJ1IjoiY3JlZXJsaW8iLCJhIjoiY21pY3IxZHljMXFwNTJzb2FydzR4b3F1YSJ9.Is8-GyfEdqwKKEo2cGO65g";async function o(e){try{let s=encodeURIComponent(e),t=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${s}.json?access_token=${n}&country=AU&limit=1`),a=await t.json();if(a.features&&a.features.length>0){let e=a.features[0],[s,t]=e.center,l=e.context||[],r=l.find(e=>e.id.includes("place"))?.text||"",i=l.find(e=>e.id.includes("region"))?.text||"",n=l.find(e=>e.id.includes("postcode"))?.text||"";return{address:e.place_name,city:r,state:i,postcode:n,coordinates:{latitude:t,longitude:s}}}return null}catch(e){return console.error("Geocoding error:",e),null}}async function d(e,s,t="driving"){try{let r=await fetch(`https://api.mapbox.com/directions/v5/mapbox/${"driving"===t?"driving-traffic":t}/${e.longitude},${e.latitude};${s.longitude},${s.latitude}?access_token=${n}&geometries=geojson&steps=true&overview=full`),i=await r.json();if(i.routes&&i.routes.length>0){var a,l;let s=i.routes[0],r=Math.round(s.duration/60),n=(s.distance/1e3).toFixed(1),o=s.legs[0].steps.map(e=>({instruction:e.maneuver.instruction,distance:e.distance/1e3,duration:Math.round(e.duration/60)})),d="driving"===t?(a=e,l=parseFloat(n),a.latitude>=-34.1&&a.latitude<=-33.5&&a.longitude>=150.5&&a.longitude<=151.5?l>30?12:l>15?8:4*(l>5):0):void 0;return{duration:r,distance:parseFloat(n),mode:t,tollCost:d,steps:o}}return null}catch(e){return console.error("Route calculation error:",e),null}}function c(e){return Math.PI/180*e}var x=e.i(21264),m=e.i(46897),u=e.i(75254);let h=(0,u.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),g=(0,u.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var p=e.i(86536);let b=(0,u.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function f({onLayerToggle:e,layers:a}){let[l,r]=(0,t.useState)(!0),i=s=>{a.forEach(t=>{t.visible!==s&&e(t.id,s)})};return(0,s.jsxs)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg overflow-hidden z-10 max-w-xs",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.MapPin,{className:"w-5 h-5"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Map Layers"})]}),(0,s.jsx)("button",{onClick:()=>r(!l),className:"text-white hover:bg-white/20 rounded p-1 transition-colors","aria-label":l?"Collapse legend":"Expand legend",children:l?(0,s.jsx)(g,{className:"w-5 h-5"}):(0,s.jsx)(h,{className:"w-5 h-5"})})]}),l&&(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex space-x-2 mb-3 pb-3 border-b border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>i(!0),className:"flex-1 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded transition-colors flex items-center justify-center space-x-1",children:[(0,s.jsx)(p.Eye,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Show All"})]}),(0,s.jsxs)("button",{onClick:()=>i(!1),className:"flex-1 px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-50 hover:bg-gray-100 rounded transition-colors flex items-center justify-center space-x-1",children:[(0,s.jsx)(b,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Hide All"})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:a.map(t=>(0,s.jsxs)("button",{onClick:()=>{var s;let l;return s=t.id,void((l=a.find(e=>e.id===s))&&e(s,!l.visible))},className:`w-full flex items-center justify-between p-2 rounded-lg transition-all ${t.visible?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200 opacity-60 hover:opacity-100"}`,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:t.color}}),(0,s.jsx)("div",{style:{color:t.color},children:t.icon}),(0,s.jsx)("span",{className:`text-sm font-medium ${t.visible?"text-gray-900":"text-gray-600"}`,children:t.label})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[void 0!==t.count&&t.count>0&&(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gray-100 text-gray-700",children:t.count}),(0,s.jsx)("div",{className:`w-10 h-5 rounded-full transition-colors ${t.visible?"bg-blue-600":"bg-gray-300"}`,children:(0,s.jsx)("div",{className:`w-4 h-4 mt-0.5 rounded-full bg-white shadow-sm transition-transform ${t.visible?"translate-x-5":"translate-x-0.5"}`})})]})]},t.id))}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Toggle layers to customize your map view"})})]})]})}let y=(0,u.default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),j=(0,u.default)("tram-front",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]),v=(0,u.default)("bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),N=(0,u.default)("footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);var w=e.i(12426),k=e.i(3116);let S=(0,u.default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var C=e.i(94351),M=e.i(7486);let $=[{id:"driving",label:"Drive",icon:y,color:"blue"},{id:"transit",label:"Transit",icon:j,color:"green"},{id:"cycling",label:"Cycle",icon:v,color:"purple"},{id:"walking",label:"Walk",icon:N,color:"orange"}],P=[{name:"Sydney CBD",state:"NSW",lat:-33.8688,lng:151.2093},{name:"Parramatta",state:"NSW",lat:-33.815,lng:151},{name:"Bondi",state:"NSW",lat:-33.8915,lng:151.2767},{name:"Chatswood",state:"NSW",lat:-33.7969,lng:151.1832},{name:"Melbourne CBD",state:"VIC",lat:-37.8136,lng:144.9631},{name:"Richmond",state:"VIC",lat:-37.8197,lng:144.9989},{name:"St Kilda",state:"VIC",lat:-37.8679,lng:144.9811},{name:"Brunswick",state:"VIC",lat:-37.7667,lng:144.96},{name:"Brisbane CBD",state:"QLD",lat:-27.4698,lng:153.0251},{name:"Fortitude Valley",state:"QLD",lat:-27.4572,lng:153.0355},{name:"South Bank",state:"QLD",lat:-27.4766,lng:153.0202},{name:"New Farm",state:"QLD",lat:-27.4667,lng:153.05},{name:"Perth CBD",state:"WA",lat:-31.9505,lng:115.8605},{name:"Fremantle",state:"WA",lat:-32.0569,lng:115.7439},{name:"Subiaco",state:"WA",lat:-31.9474,lng:115.8248},{name:"Adelaide CBD",state:"SA",lat:-34.9285,lng:138.6007},{name:"Glenelg",state:"SA",lat:-34.9804,lng:138.5129},{name:"Hobart CBD",state:"TAS",lat:-42.8821,lng:147.3272},{name:"Canberra City",state:"ACT",lat:-35.2809,lng:149.13},{name:"Darwin City",state:"NT",lat:-12.4634,lng:130.8456}];function T({origin:e,destination:a,onRouteCalculated:l,onOriginChange:r}){let[i,n]=(0,t.useState)("driving"),[o,d]=(0,t.useState)(!1),[c,x]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[g,p]=(0,t.useState)(""),[b,f]=(0,t.useState)(!e);(0,t.useEffect)(()=>{e&&a&&!o&&y()},[e,a]);let y=async()=>{if(!e||!a)return void h("Please select your location and a business to calculate route");d(!0),h(null);try{let s=await fetch("https://opulent-capybara-97gqpjqr69939pqw-5007.app.github.dev/api/map/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({origin:{latitude:e.latitude,longitude:e.longitude},destination:{latitude:a.latitude,longitude:a.longitude},travelMode:i})});if(!s.ok)throw Error("Failed to calculate route");let t=await s.json();x(t),l(t)}catch(e){h(e instanceof Error?e.message:"Failed to calculate route")}finally{d(!1)}},j=e=>`$${e.toFixed(2)}`;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(S,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Route Calculator"})]}),e&&(0,s.jsx)("button",{onClick:()=>f(!0),className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Change Location"})]}),b&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Your Location"}),e&&(0,s.jsx)("button",{onClick:()=>f(!1),className:"text-xs text-gray-600 hover:text-gray-700",children:"Cancel"})]}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:P.map(e=>(0,s.jsx)("button",{onClick:()=>{let s;return s={latitude:e.lat,longitude:e.lng,address:`${e.name}, ${e.state}`},void(p(`${e.name}, ${e.state}`),f(!1),r&&r(s))},className:"w-full text-left px-3 py-2 hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.state})]})},`${e.name}-${e.state}`))}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ Select the suburb where you live or want to live"})]}),!b&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Travel Mode"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:$.map(e=>{let t=e.icon,a=i===e.id;return(0,s.jsxs)("button",{onClick:()=>n(e.id),className:`flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all ${a?`border-${e.color}-500 bg-${e.color}-50`:"border-gray-200 hover:border-gray-300 bg-white"}`,children:[(0,s.jsx)(t,{className:`w-6 h-6 mb-1 ${a?`text-${e.color}-600`:"text-gray-600"}`}),(0,s.jsx)("span",{className:`text-xs font-medium ${a?`text-${e.color}-700`:"text-gray-700"}`,children:e.label})]},e.id)})})]}),!b&&(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2 bg-green-50 p-3 rounded-lg",children:[(0,s.jsx)(C.Home,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-xs text-green-700 font-medium mb-1",children:"Your Location (Point A)"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e?.address||(e?`${e.latitude.toFixed(4)}, ${e.longitude.toFixed(4)}`:"Not selected")}),!e&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"ðŸ‘† Select a suburb above"})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(S,{className:"w-4 h-4 text-blue-500"})}),(0,s.jsxs)("div",{className:"flex items-start space-x-2 bg-red-50 p-3 rounded-lg",children:[(0,s.jsx)(M.Building2,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-xs text-red-700 font-medium mb-1",children:"Business Location (Point B)"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:a?.name||a?.address||(a?`${a.latitude.toFixed(4)}, ${a.longitude.toFixed(4)}`:"Not selected")}),!a&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"ðŸ‘† Click a business marker on the map"})]})]})]}),!b&&(0,s.jsx)("button",{onClick:y,disabled:!e||!a||o,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Calculating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Calculate Route"})]})}),!b&&u&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:u})}),!b&&c&&(0,s.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:"Trip Summary"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,s.jsx)(m.MapPin,{className:"w-4 h-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-xs text-blue-700 font-medium",children:"Distance"})]}),(0,s.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:[c.distance.toFixed(1)," km"]})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,s.jsx)(k.Clock,{className:"w-4 h-4 text-purple-600"}),(0,s.jsx)("span",{className:"text-xs text-purple-700 font-medium",children:"Duration"})]}),(0,s.jsx)("p",{className:"text-xl font-bold text-purple-900",children:(e=>{if(e<60)return`${Math.round(e)} min`;let s=Math.floor(e/60),t=Math.round(e%60);return`${s}h ${t}m`})(c.duration)})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(w.DollarSign,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-green-700 font-semibold",children:"Cost Breakdown"})]}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[c.fuelCost>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Fuel"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:j(c.fuelCost)})]}),c.tollCost>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Tolls"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:j(c.tollCost)})]}),c.parkingCost>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Parking (daily)"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:j(c.parkingCost)})]}),c.publicTransportCost>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Public Transport"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:j(c.publicTransportCost)})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-2 border-t border-green-200",children:[(0,s.jsx)("span",{className:"font-semibold text-green-800",children:"Total Trip Cost"}),(0,s.jsx)("span",{className:"font-bold text-green-900 text-lg",children:j(c.totalCost)})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600 font-medium mb-2",children:"Commute Estimates"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Daily (2x)"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:j(2*c.totalCost)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Weekly"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:j(2*c.totalCost*5)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Monthly"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:j(2*c.totalCost*20)})]})]})]})]})]})}let F=(0,u.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),A=(0,u.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),L=(0,u.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),E=(0,u.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),B=[1,2,5,10,20],R=["All","Primary","Secondary","High School","Private","Public"];function D({location:e,onSchoolsFound:a}){let[l,r]=(0,t.useState)(5),[i,n]=(0,t.useState)("All"),[o,d]=(0,t.useState)(!1),[c,x]=(0,t.useState)([]),[u,h]=(0,t.useState)(null),[g,p]=(0,t.useState)(null),b=async()=>{if(!e)return void h("Please set a location on the map");d(!0),h(null);try{let s=await fetch("https://opulent-capybara-97gqpjqr69939pqw-5007.app.github.dev/api/map/schools",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:{latitude:e.latitude,longitude:e.longitude},radiusKm:l,schoolType:"All"===i?null:i})});if(!s.ok)throw Error("Failed to search schools");let t=await s.json();x(t),a(t)}catch(e){h(e instanceof Error?e.message:"Failed to search schools")}finally{d(!1)}},f=e=>{if(e<60)return`${Math.round(e)} min`;let s=Math.floor(e/60),t=Math.round(e%60);return`${s}h ${t}m`};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F,{className:"w-5 h-5"}),(0,s.jsx)("h3",{className:"font-semibold",children:"School Finder"})]})}),(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Radius"}),(0,s.jsx)("div",{className:"flex space-x-2",children:B.map(e=>(0,s.jsxs)("button",{onClick:()=>r(e),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border-2 transition-colors ${l===e?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[e," km"]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Type"}),(0,s.jsx)("select",{value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:R.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-2 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)(m.MapPin,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 text-sm",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Search Location"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e?`${e.latitude.toFixed(4)}, ${e.longitude.toFixed(4)}`:"Not set"})]})]}),(0,s.jsx)("button",{onClick:b,disabled:!e||o,className:"w-full py-3 px-4 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Searching..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Find Schools"})]})})]}),u&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:u})}),c.length>0&&(0,s.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Found ",c.length," Schools"]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["within ",l,"km"]})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2 pr-2",children:c.map(e=>(0,s.jsxs)("div",{onClick:()=>p(g?.id===e.id?null:e),className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${g?.id===e.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300 bg-white"}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-900 text-sm",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${e.isPublic?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:e.type}),e.fees&&(0,s.jsx)("span",{className:"text-xs text-gray-600",children:e.fees})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-yellow-500",children:[(0,s.jsx)(A,{className:"w-4 h-4 fill-current"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.rating})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600 mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(m.MapPin,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:[e.distance.toFixed(1)," km"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(F,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:[e.studentCount," students"]})]})]}),g?.id===e.id&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Travel Times from Home"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded p-2",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-1",children:"ðŸš— Drive"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:f(e.travelTimeDriving)})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded p-2",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-1",children:"ðŸšŒ Transit"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:f(e.travelTimePublicTransport)})]}),(0,s.jsxs)("div",{className:"bg-orange-50 rounded p-2",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-1",children:"ðŸš¶ Walk"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:f(e.travelTimeWalking)})]})]}),(0,s.jsx)("div",{className:"bg-yellow-50 rounded p-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs text-gray-700",children:"Est. Daily Transport Cost"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["$",(e.travelTimePublicTransport/60*4.5).toFixed(2)]})]})}),e.website&&(0,s.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 w-full py-2 px-3 bg-green-600 text-white text-sm font-medium rounded hover:bg-green-700 transition-colors",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("span",{children:"Visit Website"}),(0,s.jsx)(L,{className:"w-3 h-3"})]})]})]},e.id))})]})]})]})}let q=(0,u.default)("bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),O=(0,u.default)("bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]]);var z=e.i(25652);let I=[{id:"rent",label:"Rent",icon:"ðŸ "},{id:"sale",label:"Buy",icon:"ðŸ’°"}],H=[{value:null,label:"Any"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4+"}];function J({onPropertiesFound:e}){let[a,l]=(0,t.useState)("rent"),[r,i]=(0,t.useState)(""),[n,o]=(0,t.useState)("NSW"),[d,c]=(0,t.useState)(null),[m,u]=(0,t.useState)(!1),[h,g]=(0,t.useState)([]),[p,b]=(0,t.useState)({}),[f,j]=(0,t.useState)([]),[v,N]=(0,t.useState)(null),w=async()=>{if(!r.trim())return void N("Please enter a suburb");u(!0),N(null);try{let s=await fetch("https://opulent-capybara-97gqpjqr69939pqw-5007.app.github.dev/api/map/properties",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suburb:r,state:n,propertyType:a,bedrooms:d})});if(!s.ok)throw Error("Failed to search properties");let t=await s.json();g(t.properties),b(t.medianPrices),j(t.agents),e(t.properties,t.medianPrices)}catch(e){N(e instanceof Error?e.message:"Failed to search properties")}finally{u(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(C.Home,{className:"w-5 h-5"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Property Search"})]})}),(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:I.map(e=>(0,s.jsxs)("button",{onClick:()=>l(e.id),className:`py-2 px-4 text-sm font-medium rounded-lg border-2 transition-colors flex items-center justify-center space-x-2 ${a===e.id?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{children:e.label})]},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Suburb"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"e.g. Sydney, Melbourne...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,s.jsx)("select",{value:n,onChange:e=>o(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:x.AUSTRALIAN_STATES.map(e=>(0,s.jsx)("option",{value:e.value,children:e.abbr},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms"}),(0,s.jsx)("div",{className:"flex space-x-2",children:H.map(e=>(0,s.jsx)("button",{onClick:()=>c(e.value),className:`flex-1 py-2 px-3 text-sm font-medium rounded-lg border-2 transition-colors ${d===e.value?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:e.label},e.label))})]}),(0,s.jsx)("button",{onClick:w,disabled:!r.trim()||m,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Searching..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Home,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Search Properties"})]})})]}),v&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:v})}),Object.keys(p).length>0&&(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(z.TrendingUp,{className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("h4",{className:"font-semibold text-blue-900 text-sm",children:["Median Prices in ",r]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(p).map(([e,t])=>(0,s.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600",children:e}),(0,s.jsxs)("p",{className:"font-bold text-gray-900",children:["$",t.toLocaleString(),"rent"===a?"/wk":""]})]},e))})]}),h.length>0&&(0,s.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Found ",h.length," Properties"]})}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-3 pr-2",children:h.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border-2 border-gray-200 hover:border-orange-300 transition-all overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative h-40 bg-gray-200",children:[(0,s.jsx)("img",{src:e.image,alt:e.address,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800"}}),(0,s.jsx)("div",{className:"absolute top-2 right-2 bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:e.priceText})]}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-900",children:e.address}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.suburb,", ",e.state]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(q,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.bedrooms})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(O,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.bathrooms})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(y,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.parking})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 line-clamp-2",children:e.description}),(0,s.jsxs)("a",{href:e.listingUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 w-full py-2 px-3 bg-orange-600 text-white text-sm font-medium rounded hover:bg-orange-700 transition-colors",children:[(0,s.jsx)("span",{children:"View Full Listing"}),(0,s.jsx)(L,{className:"w-3 h-3"})]})]})]},e.id))})]}),f.length>0&&(0,s.jsxs)("div",{className:"pt-3 border-t border-gray-200",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Local Real Estate Agents"}),(0,s.jsx)("div",{className:"space-y-2",children:f.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-900",children:e.name}),(0,s.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700",children:(0,s.jsx)(L,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:e.specialty}),(0,s.jsx)("p",{className:"text-xs text-gray-700 font-medium mt-1",children:e.phone})]},t))})]})]})]})}let W=(0,u.default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);function V({value:e,onChange:a,placeholder:l="Start typing suburb or city...",className:r=""}){let[i,n]=(0,t.useState)([]),[o,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),h=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{ref:h,className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.MapPin,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>(e=>{if(a(e),e.length<2){n([]),u(!1);return}d(!0),n((0,x.searchCities)(e).slice(0,15)),u(!0),d(!1)})(e.target.value),onFocus:()=>e.length>=2&&u(!0),placeholder:l,className:`w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent ${r}`}),o&&(0,s.jsx)(W,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),c&&i.length>0&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl max-h-80 overflow-y-auto",children:i.map(e=>(0,s.jsx)("button",{onClick:()=>{a(`${e.name}, ${e.state}`,{...e,lat:e.lat,lng:e.lng}),n([]),u(!1)},className:"w-full px-4 py-3 text-left hover:bg-amber-50 border-b border-gray-100 last:border-b-0 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(m.MapPin,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[e.state," ",e.postcode," Â· ",e.region]})]})]})},e.id))}),c&&0===i.length&&e.length>=2&&!o&&(0,s.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl p-4 text-center text-gray-500 text-sm",children:['No locations found for "',e,'"']})]})}let U=(0,u.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),G=(0,u.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Y=(0,a.default)(()=>e.A(91163),{loadableGenerated:{modules:[75301]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading map..."})]})})}),K=["All",...x.INDUSTRIES],_=[5,10,20,50];function Q(){let{user:e}=(0,r.useAuth)(),a=(0,l.useRouter)(),[n,x]=(0,t.useState)([]),[m,u]=(0,t.useState)([]),[h,g]=(0,t.useState)("All"),[p,b]=(0,t.useState)(20),[y,j]=(0,t.useState)(""),[v,N]=(0,t.useState)(),[w,k]=(0,t.useState)([151.2093,-33.8688]),[S,C]=(0,t.useState)(null),[M,$]=(0,t.useState)(null),[P,F]=(0,t.useState)(null),[A,L]=(0,t.useState)(!1),[E,B]=(0,t.useState)(!1),[R,q]=(0,t.useState)(!0),[O,z]=(0,t.useState)("route"),[I,H]=(0,t.useState)([]),[W,Q]=(0,t.useState)([]),[Z,X]=(0,t.useState)([{id:"platform-businesses",label:"Platform Businesses",icon:null,color:"#3b82f6",visible:!0,count:0},{id:"external-businesses",label:"External Businesses",icon:null,color:"#8b5cf6",visible:!1,count:0},{id:"schools",label:"Schools",icon:null,color:"#10b981",visible:!1,count:0},{id:"properties-rent",label:"Rental Properties",icon:null,color:"#f59e0b",visible:!1,count:0},{id:"properties-sale",label:"Properties for Sale",icon:null,color:"#ef4444",visible:!1,count:0},{id:"transport",label:"Public Transport",icon:null,color:"#6366f1",visible:!1,count:0},{id:"points-of-interest",label:"Points of Interest",icon:null,color:"#ec4899",visible:!1,count:0}]);(0,t.useEffect)(()=>{B(!0)},[]),(0,t.useEffect)(()=>{E&&(async()=>{L(!0);let e=(0,i.getApiBaseUrl)();console.log("ðŸ—ºï¸ Loading business markers from API...",{center:w,radius:p});let{data:s,error:t}=await (0,i.safeFetch)(`${e}/api/business/map/markers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:w[1],longitude:w[0],radiusKm:p,limit:100,hiringOnly:!1})});t?console.error("âŒ Failed to load businesses:",t):s&&(console.log("âœ… Loaded",s.length,"businesses"),x(s),u(s)),L(!1)})()},[E,w,p]);let[ee,es]=(0,t.useState)({totalBusinesses:0,totalJobs:0,nearbySchools:0,averageCommute:0});(0,t.useEffect)(()=>{let e=localStorage.getItem("userHomeLocation");if(e)try{let s=JSON.parse(e);N([s.longitude,s.latitude]),k([s.longitude,s.latitude]),F({latitude:s.latitude,longitude:s.longitude,address:s.address||"Your Location"})}catch(e){console.error("Error loading home location:",e)}},[]),(0,t.useEffect)(()=>{let e=n;"All"!==h&&(e=e.filter(e=>e.industry===h)),v&&(e=e.filter(e=>{var s,t;let a,l,r;return s={latitude:v[1],longitude:v[0]},a=c((t={latitude:e.location.latitude,longitude:e.location.longitude}).latitude-s.latitude),l=c(t.longitude-s.longitude),Math.round(6371*(2*Math.atan2(Math.sqrt(r=Math.sin(a/2)*Math.sin(a/2)+Math.cos(c(s.latitude))*Math.cos(c(t.latitude))*Math.sin(l/2)*Math.sin(l/2)),Math.sqrt(1-r)))*10)/10<=p})),u(e),es({totalBusinesses:e.length,totalJobs:e.reduce((e,s)=>e+s.openPositions,0),nearbySchools:0,averageCommute:0})},[n,h,p,v]);let et=async()=>{if(y.trim()){L(!0);try{let e=await o(y);e&&e.coordinates&&(k([e.coordinates.longitude,e.coordinates.latitude]),N([e.coordinates.longitude,e.coordinates.latitude]),localStorage.setItem("userHomeLocation",JSON.stringify({address:e.address,longitude:e.coordinates.longitude,latitude:e.coordinates.latitude})))}catch(e){console.error("Error geocoding address:",e),alert("Could not find that location. Please try again.")}finally{L(!1)}}},ea=async e=>{if($(e),v){L(!0);try{let s=await d({latitude:v[1],longitude:v[0]},{latitude:e.location.latitude,longitude:e.location.longitude},"driving");if(s){let e=s.steps?s.steps.flatMap(e=>e.geometry?.coordinates||[]):[];C({type:"Feature",geometry:{type:"LineString",coordinates:e}})}}catch(e){console.error("Error calculating route:",e)}finally{L(!1)}}},el=m.map(e=>({id:e.id,name:e.name,industry:e.industry,address:e.address||`${e.location.city}, ${e.location.state}`,latitude:e.location.latitude,longitude:e.location.longitude,jobCount:e.openPositions,logo:e.logo,city:e.location.city,state:e.location.state,openPositions:e.openPositions,activelyHiring:e.activelyHiring}));return(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸŒŸ Discover Your Next Workplace"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Explore businesses, research locations, and connect proactively"}),(0,s.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-full font-medium",children:"Find Great Employers"}),(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full font-medium",children:"Research Locations"}),(0,s.jsx)("span",{className:"px-2 py-1 bg-green-50 text-green-700 text-xs rounded-full font-medium",children:"Proactive Recruiting"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>a.push("/talent/portfolio/preview"),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-purple-700 hover:to-blue-700 flex items-center gap-2",children:"ðŸ“¤ Share Portfolio"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Welcome,"}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:e?.firstName||"Guest"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Location"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(V,{value:y,onChange:(e,s)=>{j(e),s&&(k([s.lng,s.lat]),N([s.lng,s.lat]),localStorage.setItem("userHomeLocation",JSON.stringify({address:e,longitude:s.lng,latitude:s.lat})))},placeholder:"Enter address or suburb...",className:"flex-1"}),(0,s.jsx)("button",{onClick:et,disabled:A,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:A?"...":"Go"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),(0,s.jsx)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:K.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km)"}),(0,s.jsx)("div",{className:"flex gap-2",children:_.map(e=>(0,s.jsxs)("button",{onClick:()=>b(e),className:`flex-1 px-3 py-2 rounded-lg font-medium transition-colors ${p===e?"bg-amber-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e,"km"]},e))})]})]})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 px-4 py-3",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,s.jsx)("strong",{className:"text-blue-700",children:ee.totalBusinesses})," ",(0,s.jsx)("span",{className:"text-amber-700",children:"businesses to explore"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,s.jsx)("strong",{className:"text-green-700",children:ee.totalJobs})," ",(0,s.jsx)("span",{className:"text-green-700",children:"opportunities"})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"ðŸŽ¯ Make proactive connections"})})]}),M&&S&&(0,s.jsx)("button",{onClick:()=>{C(null),$(null)},className:"px-4 py-1.5 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:"Clear Route"})]})}),(0,s.jsxs)("div",{className:"flex-1 relative flex",children:[!v&&(0,s.jsx)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 shadow-lg max-w-md",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Set your home location"}),(0,s.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Search for your address above to see businesses within your preferred distance and calculate commute times."})]})]})}),(0,s.jsx)(Y,{businesses:el,center:w,zoom:v?12:11,onBusinessClick:e=>{let s=m.find(s=>s.id===e.id);s&&ea(s)},showUserLocation:!0,userHome:v,routeGeoJSON:S,schools:I,properties:W,visibleLayers:Z.filter(e=>e.visible).map(e=>e.id)}),(0,s.jsx)(f,{layers:Z.map(e=>({...e,count:"platform-businesses"===e.id?ee.totalBusinesses:"schools"===e.id?I.length:"properties-rent"===e.id||"properties-sale"===e.id?W.length:0})),onLayerToggle:(e,s)=>{X(t=>t.map(t=>t.id===e?{...t,visible:s}:t))}}),(0,s.jsx)("button",{onClick:()=>q(!R),className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white rounded-r-lg shadow-lg p-2 hover:bg-gray-50 transition-colors",style:{left:R?"400px":"4px"},children:R?(0,s.jsx)(U,{className:"w-5 h-5 text-gray-600"}):(0,s.jsx)(G,{className:"w-5 h-5 text-gray-600"})}),R&&(0,s.jsxs)("div",{className:"absolute left-0 top-0 bottom-0 w-96 bg-white shadow-xl z-10 overflow-y-auto",children:[(0,s.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{onClick:()=>z("route"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors ${"route"===O?"border-b-2 border-blue-600 text-blue-700 bg-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸš— Routes"}),(0,s.jsx)("button",{onClick:()=>z("schools"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors ${"schools"===O?"border-b-2 border-green-600 text-green-700 bg-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸŽ“ Schools"}),(0,s.jsx)("button",{onClick:()=>z("properties"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors ${"properties"===O?"border-b-2 border-orange-600 text-orange-700 bg-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ  Properties"})]})}),(0,s.jsxs)("div",{className:"p-4",children:["route"===O&&(0,s.jsx)(T,{origin:P,destination:M?{latitude:M.location.latitude,longitude:M.location.longitude,name:M.name,address:M.address||`${M.location.city}, ${M.location.state}`}:null,onRouteCalculated:e=>{console.log("Route calculated:",e),e.geometry&&C(e.geometry)},onOriginChange:e=>{console.log("Origin changed:",e),F(e),e&&(k([e.longitude,e.latitude]),N([e.longitude,e.latitude]))}}),"schools"===O&&(0,s.jsx)(D,{location:v?{latitude:v[1],longitude:v[0]}:null,onSchoolsFound:e=>{H(e),X(s=>s.map(s=>"schools"===s.id?{...s,visible:!0,count:e.length}:s))}}),"properties"===O&&(0,s.jsx)(J,{onPropertiesFound:(e,s)=>{Q(e),console.log("Properties found:",e.length),console.log("Median prices:",s)}})]})]})]})]})}e.s(["default",()=>Q],18948)}]);